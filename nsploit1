local player = game.Players.LocalPlayer
local gui = Instance.new("ScreenGui")
gui.Name = "NSPLO1t"
gui.ResetOnSpawn = false -- Prevent removal on death
gui.Parent = player:WaitForChild("PlayerGui")

-- Create NS Button
local button = Instance.new("TextButton")
button.Size = UDim2.new(0, 80, 0, 40)
button.Position = UDim2.new(0.1, 0, 0.1, 0)
button.Text = "NS"
button.TextScaled = true
button.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
button.TextColor3 = Color3.new(1, 1, 1)
button.Parent = gui

-- Make UI Draggable
local function makeDraggable(frame, button)
    local dragging, dragInput, startPos, startInputPos

    local function update(input)
        local delta = input.Position - startInputPos
        frame.Position = UDim2.new(
            startPos.X.Scale, startPos.X.Offset + delta.X,
            startPos.Y.Scale, startPos.Y.Offset + delta.Y
        )
    end

    button.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            startPos = frame.Position
            startInputPos = input.Position

            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)

    button.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement then
            dragInput = input
        end
    end)

    game:GetService("UserInputService").InputChanged:Connect(function(input)
        if input == dragInput and dragging then
            update(input)
        end
    end)
end

-- Create NS Frame
local nsFrame = Instance.new("Frame")
nsFrame.Size = UDim2.new(0.4, 0, 0.4, 0)
nsFrame.Position = UDim2.new(0.3, 0, 0.3, 0)
nsFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
nsFrame.Visible = false
nsFrame.Parent = gui

-- Make the frame draggable
makeDraggable(nsFrame, nsFrame)

-- Create Tabs
local tabNames = {"Home", "Tp", "Misc"}
local tabButtons = {}
local homeText, tpFrame, miscFrame, rejoinButton

for i, tabName in ipairs(tabNames) do
    local tabButton = Instance.new("TextButton")
    tabButton.Size = UDim2.new(0.1, 0, 0.08, 0)
    tabButton.Position = UDim2.new(0.02, 0, 0.2 + (i - 1) * 0.1, 0)
    tabButton.Text = tabName
    tabButton.TextScaled = true
    tabButton.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    tabButton.TextColor3 = Color3.fromRGB(0, 150, 255)
    tabButton.Parent = nsFrame
    tabButtons[tabName] = tabButton
end

-- Home Tab
homeText = Instance.new("TextLabel")
homeText.Size = UDim2.new(1, 0, 0.6, 0)
homeText.Position = UDim2.new(0, 0, 0.3, 0)
homeText.Text = "NS"
homeText.TextColor3 = Color3.new(0, 0, 0.5) -- Navy blue text
homeText.TextScaled = true
homeText.Font = Enum.Font.GothamBold
homeText.BackgroundTransparency = 1
homeText.Parent = nsFrame

-- Stats on Home Tab
local statsText = Instance.new("TextLabel")
statsText.Size = UDim2.new(1, 0, 0.2, 0)
statsText.Position = UDim2.new(0, 0, 0.6, 0)
statsText.TextColor3 = Color3.new(1, 1, 1)
statsText.TextScaled = true
statsText.Font = Enum.Font.Gotham
statsText.BackgroundTransparency = 1
statsText.Parent = nsFrame

game:GetService("RunService").RenderStepped:Connect(function()
    local ping = game:GetService("Stats").Network.ServerStatsItem["Data Ping"]:GetValue()
    local fps = math.floor(1 / game:GetService("RunService").RenderStepped:Wait())
    local health = player.Character and player.Character:FindFirstChild("Humanoid") and player.Character.Humanoid.Health or "N/A"
    statsText.Text = "Ping: " .. math.floor(ping) .. "ms | FPS: " .. fps .. " | Health: " .. health
end)

-- TP Tab
tpFrame = Instance.new("Frame")
tpFrame.Size = UDim2.new(1, 0, 0.6, 0)
tpFrame.Position = UDim2.new(0, 0, 0.3, 0)
tpFrame.BackgroundTransparency = 1
tpFrame.Visible = false
tpFrame.Parent = nsFrame

if game:GetService("MarketplaceService"):GetProductInfo(game.PlaceId).Name == "Proxima Hangout" then
    local topCubeButton = Instance.new("TextButton")
    topCubeButton.Size = UDim2.new(0.6, 0, 0.2, 0)
    topCubeButton.Position = UDim2.new(0.2, 0, 0.5, 0)
    topCubeButton.Text = "Top Cube"
    topCubeButton.TextScaled = true
    topCubeButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    topCubeButton.TextColor3 = Color3.new(1, 1, 1)
    topCubeButton.Parent = tpFrame
    topCubeButton.Visible = false

    topCubeButton.MouseButton1Click:Connect(function()
        local destination = game.Workspace:FindFirstChild("TeleportDestination")
        if destination then
            player.Character:SetPrimaryPartCFrame(destination.CFrame)
        end
    end)

    tabButtons["Tp"].MouseButton1Click:Connect(function()
        homeText.Visible = false
        tpFrame.Visible = true
        topCubeButton.Visible = true
    end)
end

-- Misc Tab
miscFrame = Instance.new("Frame")
miscFrame.Size = UDim2.new(1, 0, 0.6, 0)
miscFrame.Position = UDim2.new(0, 0, 0.3, 0)
miscFrame.BackgroundTransparency = 1
miscFrame.Visible = false
miscFrame.Parent = nsFrame

rejoinButton = Instance.new("TextButton")
rejoinButton.Size = UDim2.new(0.5, 0, 0.2, 0)
rejoinButton.Position = UDim2.new(0.25, 0, 0.6, 0)
rejoinButton.Text = "Rejoin"
rejoinButton.TextScaled = true
rejoinButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
rejoinButton.TextColor3 = Color3.new(1, 1, 1)
rejoinButton.Parent = miscFrame
rejoinButton.Visible = false

rejoinButton.MouseButton1Click:Connect(function()
    rejoinButton.Text = "Rejoining..."
    rejoinButton.TextColor3 = Color3.fromRGB(100, 100, 100)
    rejoinButton.Active = false
    wait(0.5)
    game:GetService("TeleportService"):Teleport(game.PlaceId, player)
end)

-- Toggle UI
button.MouseButton1Click:Connect(function()
    nsFrame.Visible = not nsFrame.Visible
end)

-- Tab Switching
tabButtons["Home"].MouseButton1Click:Connect(function()
    homeText.Visible = true
    tpFrame.Visible = false
    miscFrame.Visible = false
    rejoinButton.Visible = false
end)

tabButtons["Tp"].MouseButton1Click:Connect(function()
    homeText.Visible = false
    tpFrame.Visible = true
    miscFrame.Visible = false
    rejoinButton.Visible = false
end)

tabButtons["Misc"].MouseButton1Click:Connect(function()
    homeText.Visible = false
    tpFrame.Visible = false
    miscFrame.Visible = true
    rejoinButton.Visible = true
end)
